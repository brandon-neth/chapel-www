<!DOCTYPE html>

<html data-theme="light" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="#00cbff" name="theme-color"/>
<meta content="The fourth archival post from the 2012 IEEE TCSC blog series with a current reflection on it" name="description"/>
<link href="//cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css" media="screen,print" rel="stylesheet"/>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/katex.min.css" integrity="sha384-bYdxxUwYipFNohQlHt0bjN/LCpueqWz13HufFEV1SUatKs1cm4L6fFgCi1jT643X" rel="stylesheet"/>
<style>.sidenote-checkbox { display: none; }</style>
<style>.feather { width: 1rem; height: 1rem; }</style>
<link href="../../scss/style.min.css" media="screen,print" rel="stylesheet"/>
<link href="../../scss/sidenotes.min.css" media="screen,print" rel="stylesheet"/>
<link href="../../css/syntax.min.css" media="screen,print" rel="stylesheet"/>
<link href="../../scss/syntax-terminal.min.css" media="screen,print" rel="stylesheet"/>
<link href="../../scss/code.min.css" media="screen,print" rel="stylesheet"/>
<link href="../../img/favicon.ico" rel="icon" type="image/png"/>
<script defer="" src="../../js/dropdown-menu.js"></script>
<title>10 Myths About Scalable Parallel Programming Languages (Redux),  Part 4: Syntax Matters</title>
</head>
<body>
<header>
<div class="container">
<a class="site-title" href="../../">
<img alt="Chapel logo" height="50" src="../../img/logo.png" width="50"/>
<h1>Chapel Language Blog</h1>
</a>
</div>
<nav id="Header">
<div class="container">
<a href="../../about">About</a>
<a href="https://chapel-lang.org">Chapel Website</a>
<a href="../../featured">Featured</a>
<a href="../../series">Series</a>
<a href="../../tags">Tags</a>
<a href="../../authors">Authors</a>
<a href="../../posts">All Posts</a>
</div>
</nav>
</header>
<main class="container">
<h2>10 Myths About Scalable Parallel Programming Languages (Redux),  Part 4: Syntax Matters</h2>
<div class="post-subscript">
<p>Posted on July 23, 2025.</p>
<p>
        Tags:
        
        <a class="button" href="../../tags/editorial">Editorial</a>
<a class="button" href="../../tags/archival-posts-/-reprints">Archival Posts / Reprints</a>
</p>
<p>
    By:
    <a href="../../authors/brad-chamberlain">Brad Chamberlain</a>
</p>
</div>
<div class="post-content">
<div class="table-of-contents">
<div class="wrapper">
<span class="header">Table of Contents</span>
<nav id="TableOfContents">
<ul>
<li><a href="#background">Background</a></li>
<li><a href="#the-original-article-reprinted">The Original Article, Reprinted</a>
<ul>
<li><a href="#myth-4-syntax-doesnt-matter">Myth #4: Syntax doesn’t matter.</a></li>
<li><a href="#counterpoint-4-syntax-does-matter-and-can-greatly-impact-a-programmers-productivity-and-creativity-in-a-language-as-well-as-their-ability-to-read-maintain-and-modify-code-written-in-that-language">Counterpoint #4: Syntax does matter and can greatly impact a programmer’s productivity and creativity in a language, as well as their ability to read, maintain, and modify code written in that language.</a></li>
<li><a href="#bibliography">Bibliography</a></li>
</ul>
</li>
<li><a href="#reflections-on-the-original-article">Reflections on the Original Article</a>
<ul>
<li><a href="#syntax-and-scalable-parallel-computing">Syntax and Scalable Parallel Computing</a></li>
<li><a href="#skyline-array-examples">Skyline Array Examples</a></li>
<li><a href="#wrapping-up">Wrapping Up</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</div>
<h3 id="background">
<a href="#background">Background</a>
</h3>
<p>In 2012, I wrote a series of eight blog posts entitled “Myths About
Scalable Parallel Programming Languages” for the IEEE Technical
Community on Scalable Computing (TCSC).  In it, I described
discouraging attitudes that our team encountered when talking about
developing a language like Chapel and gave my personal rebuttal to
them.  That series has generally been unavailable for many years, so
for its 13th anniversary, we’re reprinting the original series here on
the Chapel blog, along with new commentary about how well or poorly
the ideas have held up over time.  For a more detailed introduction to
both the original series and this updated one, please see <a href="../../posts/10myths-part1/">the first
article</a> in this series.</p>
<p>This month, we’re reprinting the fourth article in the original
series, originally published on July 23, 2012.  Comments in the
sidebar and in <a href="#reflections-on-the-original-article">the sections that follow the reprint</a> contain current thoughts
and reflections on it:</p>
<hr/>
<h3 id="the-original-article-reprinted">
<a href="#the-original-article-reprinted">The Original Article, Reprinted</a>
</h3>
<p class="big">Myths About Scalable Parallel Programming Languages:<br/>
Part 4: Syntax Matters</p>
<p>This is the fourth in a series of blog articles that I’m writing with
the goal of listing and responding to some of the assumptions about
developing scalable parallel programming languages that our team
encounters when talking about our work designing and implementing
Chapel (<a href="https://chapel-lang.org" rel="noopener" target="_blank">https://chapel-lang.org</a>).</p>
<p>For more background on Chapel or this series of articles, please refer
to parts <a href="../../posts/10myths-part1/#the-original-article-reprinted">1</a>, <a href="../../posts/10myths-part2/#the-original-article-reprinted">2</a>, and <a href="../../posts/10myths-part3/#the-original-article-reprinted">3</a>.</p>
<h4 id="myth-4-syntax-doesnt-matter">
<a href="#myth-4-syntax-doesnt-matter">Myth #4: Syntax doesn’t matter.</a>
</h4>
<p>This myth is somewhat related to last month’s.  In many cases,
attempts to improve on existing syntax are belittled within the
computer science community for being shallow, or merely sugary,
contributions.  A common attitude is “if it doesn’t give me improved
semantic power, it’s not worth my time.”  In this article, I want to
challenge this notion.  While most of our programming languages are
Turing complete, there’s a good reason that we don’t code in terms of
<span class="sidenote"><label class="sidenote-label" for="sidenote-0">tape reads/writes/shifts</label><input class="sidenote-checkbox" id="sidenote-0" type="checkbox"/><span class="sidenote-content sidenote-right"><span class="sidenote-delimiter">[note:</span>In case it’s not
obvious, I was referring to programming an abstract <a href="https://en.wikipedia.org/wiki/Turing_machine" rel="noopener" target="_blank">Turing
Machine</a>
here.<span class="sidenote-delimiter">]</span></span></span> or lambda calculus—namely, because syntax
matters.</p>
<p>A few years back, I’d frequently run into a close colleague, and our
conversations about programming models like Chapel would inevitably
reach a point where she would say “syntax matters!”  And I would
vehemently agree, saying, “yes, syntax does matter!”  It took several
iterations of this exchange until I finally realized that we were
saying very different things in spite of our apparent agreement.</p>
<p>By her statement, she meant, “programmers care about syntax and won’t
use new languages that don’t extend those with which they’re already
familiar.”  A common illustration of this opinion is seen in users who
clamor for new and better ways of programming existing and emerging
large-scale machines, yet don’t want you to change a single thing
about their favorite language.  This was essentially the theme of
<a href="../../posts/10myths-part3/#the-original-article-reprinted">last month’s article</a>, so I won’t repeat those arguments
here.</p>
<blockquote class="pull-quote">
<div class="quote-wrapper">
<div class="quote-container"><span class="open-quote">“</span></div>
<div class="quote-content">
<p>
Syntax can markedly improve the readability, writability, clarity,
and maintainability of a program.
</p>
</div>
<div class="quote-container"><span class="close-quote">”</span></div>
</div>
</blockquote>
<p>In contrast, when I said “yes, syntax matters!” what I was saying is
that I believe syntax can markedly improve the readability,
writability, clarity, and maintainability of a program; and that the
benefits of an improved syntax can easily be worth the effort that it
may take a C, Java, or Fortran programmer to adjust to its novelty.
Moreover, I believe that a well-designed syntax can often make a novel
language easier to learn, as compared to sticking with an established
syntax merely for the sake of familiarity.</p>
<p>As I mentioned last month, in Chapel’s design, we have generally
<span class="sidenote"><label class="sidenote-label" for="sidenote-1">followed C’s lead syntactically</label><input class="sidenote-checkbox" id="sidenote-1" type="checkbox"/><span class="sidenote-content sidenote-right"><span class="sidenote-delimiter">[note:</span>Re-reading
this today, it’s interesting to me that I characterized Chapel as
being so C-oriented when writing this series.  Today, I tend to
describe Chapel as taking ideas and syntax from a number of languages
without necessarily placing special emphasis on C.  Maybe because
Python and other languages have become so much more prominent, whereas
at the time of Chapel’s inception most popular languages seemed to
have fairly strong syntactic ties to C?<span class="sidenote-delimiter">]</span></span></span>, but have also
felt free to depart from it in cases where we believe the benefits
outweigh the learning curve of the departure.  One very obvious case
is our declaration syntax, which tends to take more of a Modula-style,
keyword-based, left-to-right approach rather than adopting C’s
“inside-out” declaration style.  As an example, let’s consider the
creation of a <em>skyline array</em>—an array of arrays in which the sizes of
the inner arrays vary from element to element of the outer array.  As
a particularly simple example, let’s consider declaring an array of
arrays that represents a triangular index space.  In C, we might
declare such an array as follows:</p>
<div class="highlight"><pre class="chroma" tabindex="0"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="kt">float</span><span class="o">*</span> <span class="n">tri</span><span class="p">[</span><span class="n">n</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">tri</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="kt">float</span><span class="o">*</span><span class="p">)</span><span class="nf">malloc</span><span class="p">((</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">float</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Using Chapel’s declaration syntax, here is how a
similar triangular array could be declared:</p>
<div class="highlight"><pre class="chroma" tabindex="0"><code class="language-chapel" data-lang="chapel"><span class="line"><span class="cl"><span class="kd">var</span><span class="w"> </span><span class="nx">A</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="nx">i</span><span class="w"> </span><span class="kd">in</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="nx">n</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="kt">real</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>For those unfamiliar with Chapel, this declaration says “declare a new
variable (<code>var</code>) named <code>A</code> that is (<code>:</code>) an array (<code>[…]</code>) over the
index set <small><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>…</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1…n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span></span></span></span></small>, referring to those indices as <code>i</code> for
the remainder of the type expression.  Each element is also an array,
over the index set <small><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>…</mo><mi>i</mi></mrow><annotation encoding="application/x-tex">1…i</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span></span></span></span></small>, of real floating point
variables (<code>real</code>).  Once you learn to read <code>:</code> as “is of type” and
square brackets as array type specifiers, the declaration is fairly
<span class="sidenote"><label class="sidenote-label" for="sidenote-2">easy to understand</label><input class="sidenote-checkbox" id="sidenote-2" type="checkbox"/><span class="sidenote-content sidenote-right" style="margin-top: -13.5rem"><span class="sidenote-delimiter">[note:</span>Regrettably, despite
designing Chapel’s syntax to support closed-form skyline array
declarations like this one, such declarations have not yet been
implemented due to lack of prioritization.  However, both this example
and the current workarounds for it in Chapel support the argument that
better syntax can improve code clarity and maintainability.  I’ll come
back to this <a href="#skyline-array-examples">in the comments below</a>.<span class="sidenote-delimiter">]</span></span></span></p>
<p>So, does this declaration syntax provide any new semantic power over
what we could do in C?  No, in both cases, the result is a fairly
straightforward <span class="sidenote"><label class="sidenote-label" for="sidenote-3">array of arrays</label><input class="sidenote-checkbox" id="sidenote-3" type="checkbox"/><span class="sidenote-content sidenote-right" style="margin-top: 2.5rem"><span class="sidenote-delimiter">[note:</span>A current
colleague, reading this for the first time, asserts that C doesn’t
really have proper arrays.  I’d agree with that, both today and when I
wrote the original article, but I didn’t necessarily want to get into
that debate with C enthusiasts at the time, so gave it the benefit of
the doubt.<span class="sidenote-delimiter">]</span></span></span>.  Does it require a learning curve for the C
programmer?  Sure.  But the result is something that is more concise
while also arguably being more readable and elegant.  For this reason,
we believe that the syntactic divergence from C will ultimately
benefit programmers more than adhering to C would.</p>
<p>These benefits become even more significant when moving to
higher-dimensional and more complex array-of-array data structures.
One of the early computations we studied when designing Chapel was a
Fast Multipole Method (FMM) benchmark that was developed by Boeing for
DARPA’s Data-Intensive Systems (DIS) program of the late 1990’s/early
2000’s [<a href="#bibliography">1</a>].  The primary data structure in this mini-application is a
collection of signature functions stored using a hierarchy of 3D
sparse arrays. Each signature function is a 2D discretization of a
spherical function in which the elements are 3-element vectors of
complex values.  In this data structure, the granularity of the 3D
arrays, their sparsity patterns, and the size of the 2D
discretizations all vary based on the level in the hierarchy (and, in
the case of the sparsity patterns, the input dataset).  The
declaration of a hierarchy of signature functions ends up looking as
follows using Chapel’s declaration syntax:</p>
<div class="highlight"><pre class="chroma" tabindex="0"><code class="language-chapel" data-lang="chapel"><span class="line"><span class="cl"><span class="kd">var</span><span class="w"> </span><span class="nx">OSgFn</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="nx">lvl</span><span class="w"> </span><span class="kd">in</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="nx">nLvls</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="nx">SpsCubes</span><span class="p">[</span><span class="nx">lvl</span><span class="p">]]</span><span class="w"> </span><span class="p">[</span><span class="nx">SgFns</span><span class="p">[</span><span class="nx">lvl</span><span class="p">]]</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="kt">complex</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>In this declaration, <em>SpsCubes</em> is a 1D array of 3D sparse, strided
<em>domains</em> (index sets) while <em>SgFns</em> is a 1D array of 2D domains—I’ve
omitted these supporting declarations for <span class="sidenote"><label class="sidenote-label" for="sidenote-4">reasons of space</label><input class="sidenote-checkbox" id="sidenote-4" type="checkbox"/><span class="sidenote-content sidenote-right" style="margin-top: -6.5rem"><span class="sidenote-delimiter">[note:</span>Since space is not as much of a concern in
this reprint series, I’ve added the supporting declarations in the
discussion sections below.<span class="sidenote-delimiter">]</span></span></span>.  Thus, the resulting
declaration creates a 1D array of sparse, strided 3D arrays of 2D
arrays of 3-element vectors of complex values.  I would argue that
even a novice Chapel programmer who reads these declarations could
<span class="sidenote"><label class="sidenote-label" for="sidenote-5">easily</label><input class="sidenote-checkbox" id="sidenote-5" type="checkbox"/><span class="sidenote-content sidenote-right"><span class="sidenote-delimiter">[note:</span>In retrospect, “easily” seems like an
overstatement—this is by no means a trivial variable declaration.  But
it’s definitely far easier to figure out than the original reference
version was.<span class="sidenote-delimiter">]</span></span></span> figure this out.  In contrast, the C
version of this data structure was based on 1D arrays with lots of
indirect indexing, making the conceptual view of the data structure
virtually incomprehensible.  In fact, I’d wager that if a programmer
was handed both codes and asked to draw the data structure on a
whiteboard, that a beginning Chapel programmer could do so within a
few minutes while expert C programmers would likely require days to
reach the same conclusion from the C version, if they ever could.</p>
<p>As evidence of this conjecture, after writing the FMM computation in
an early draft of Chapel, I showed the code to the Boeing engineer who
co-wrote the C and walked him through it to introduce him to Chapel
and make sure I had captured everything correctly.  It was the first
time he had been exposed to Chapel, and every once in awhile he would
fall silent, clearly thinking about something.  I was worried that he
was having trouble following all of the new concepts and syntax I was
throwing at him.  Instead, when he spoke, he was pointing out bugs
that I had introduced into the algorithm—for example, errors in which
I wasn’t performing the right transformations at the finest levels of
the hierarchy.  In contrast, when he had taught me the FMM computation
a few weeks prior, we used the whiteboard exclusively, never even
bothering to look at the C code because it was so unclear as to not be
the slightest bit illuminating.  Syntax matters.</p>
<blockquote class="pull-quote">
<div class="quote-wrapper">
<div class="quote-container"><span class="open-quote">“</span></div>
<div class="quote-content">
<p>
A programming language with improved syntax permits users to spend
more time working on the computations that they are writing and the
problems they are solving.
</p>
</div>
<div class="quote-container"><span class="close-quote">”</span></div>
</div>
</blockquote>
<p>As one last example, consider the following Chapel expression, which
refers to a subset of an array’s values using a slicing operator:</p>
<div class="highlight"><pre class="chroma" tabindex="0"><code class="language-chapel" data-lang="chapel"><span class="line"><span class="cl"><span class="nx">A</span><span class="p">[</span><span class="mi">2</span><span class="o">..</span><span class="nx">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nx">j</span><span class="o">..</span><span class="p">]</span><span class="w">
</span></span></span></code></pre></div><p>This expression evaluates to a sub-array of <em>A</em>’s values, from rows 2
through <em>n</em>–1 and columns <em>j</em> through <em>A</em>’s upper bound.  Consider
writing the same expression using a class library-based approach in
C++:</p>
<div class="highlight"><pre class="chroma" tabindex="0"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="n">A</span><span class="p">.</span><span class="nf">slice</span><span class="p">(</span><span class="n">new</span> <span class="nf">Range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">new</span> <span class="nf">HalfBoundedRange</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">LOWER</span><span class="p">))</span>
</span></span></code></pre></div><p>Again, these two expressions are semantically equivalent, but I would
argue that syntactic support for ranges, multidimensional arrays, and
slicing results in a far more productive expression than a more
minimalist OOP design.  An expert C++ programmer could potentially
utilize more advanced operator overloading and macros to make this
expression less verbose and more concise but, as I argued in <a href="../../posts/10myths-part1/#the-original-article-reprinted">article
1</a>,
exposing these concepts in the language syntax and semantics benefits
not only the programmer and readers, but also the compiler’s ability
to analyze and optimize the program.</p>
<blockquote class="compound">
<p>“Language shapes the way we think, and determines what we think about.”</p>
<footer>
    — Benjamin Lee Whorf
    
    
  </footer>
</blockquote>
<p>Though Benjamin Lee Whorf was a linguist who studied human, rather
than computational, languages, I believe that his conjecture applies
to programming as well as natural languages.  In particular, I would
argue that a programming language with improved syntax (and semantics)
permits users to spend more time working on the computations that they
are writing and <span class="sidenote"><label class="sidenote-label" for="sidenote-6">the problems they are solving</label><input class="sidenote-checkbox" id="sidenote-6" type="checkbox"/><span class="sidenote-content sidenote-right"><span class="sidenote-delimiter">[note:</span>I think Scott Bachman’s work in Chapel as described in our <a href="../../posts/7qs-bachman/">recent
interview with him</a> is a good example of
this principle.  He has described how switching from Matlab to Chapel
resulted in a 10,000x speedup for his code, where some of that was
algorithmic changes that were enabled by Chapel’s syntax and
features.<span class="sidenote-delimiter">]</span></span></span> rather than on lower-level details that can
be abstracted by languages and implemented by compilers.</p>
<h4 id="counterpoint-4-syntax-does-matter-and-can-greatly-impact-a-programmers-productivity-and-creativity-in-a-language-as-well-as-their-ability-to-read-maintain-and-modify-code-written-in-that-language">
<a href="#counterpoint-4-syntax-does-matter-and-can-greatly-impact-a-programmers-productivity-and-creativity-in-a-language-as-well-as-their-ability-to-read-maintain-and-modify-code-written-in-that-language">Counterpoint #4: Syntax does matter and can greatly impact a programmer’s productivity and creativity in a language, as well as their ability to read, maintain, and modify code written in that language.</a>
</h4>
<p>Tune in next time for more myths about scalable parallel programming
languages.</p>
<h4 id="bibliography">
<a href="#bibliography">Bibliography</a>
</h4>
<p>[1] Atlantic Aerospace Electronics Corp., <a href="http://www.ai.mit.edu/projects/aries/Documents/DIS_Benchmarks_v1.pdf" rel="noopener" target="_blank">Data-Intensive Benchmark
Suite: Analysis and Specification (version
1.0)</a>,
June 1999.</p>
<hr/>
<h3 id="reflections-on-the-original-article">
<a href="#reflections-on-the-original-article">Reflections on the Original Article</a>
</h3>
<p>Like last month’s myth, I feel like the “syntax doesn’t matter!”
attitude isn’t as prevalent today as it was back then.  It may be that
since languages with attractive syntax like Python, Go, or Swift have
become more prevalent, people are more aware of how syntax can help
them, or help popularize a language.  Or it may just be that I don’t
hang out in academic computer science circles as much these days.  In
any case, while the myth may not be as relevant today, I think my
response still is.  Let’s look at a couple of aspects of it.</p>
<h4 id="syntax-and-scalable-parallel-computing">
<a href="#syntax-and-scalable-parallel-computing">Syntax and Scalable Parallel Computing</a>
</h4>
<p>Re-reading this article today, it’s interesting to me that the
examples I focused on when arguing that syntax matters dealt only with
patterns that were largely independent of the scalable parallel
computing context for which Chapel was originally developed.  Perhaps
this was due to the fact that scalable parallel computing is typically
done in (historically) sequential languages like Fortran, C, and C++,
where the parallelism and locality elements required to scale were
expressed using libraries like MPI or directive-based approaches like
OpenMP.  So, since the syntax was determined by the base languages and
those languages only focused on local computations, maybe that’s where
I focused?</p>
<p>However, if we think of common notations for scalable parallel
computing—like MPI or OpenMP—as being pseudo-languages in and of
themselves, then perhaps I should’ve also compared Chapel’s syntax to
the library calls and directives used in such systems.</p>
<p>Googling “hybrid MPI OpenMP hello world”, the first hit I get is the
following program by Joseph Steinberg at <a href="https://stackoverflow.com/questions/35246774/hello-world-c-program-using-hybrid-of-openmp-and-mpi" rel="noopener" target="_blank">Stack
Overflow</a>:</p>
<div class="file" data-code-path="code/hello.c" data-code-type="main" data-start-line="1">
<div class="file-header">
<a download="hello.c" href="code/hello.c">hello.c</a>
</div>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma" tabindex="0"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma" tabindex="0"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;mpi.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;omp.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="n">numprocs</span><span class="p">,</span> <span class="n">rank</span><span class="p">,</span> <span class="n">namelen</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kt">char</span> <span class="n">processor_name</span><span class="p">[</span><span class="n">MPI_MAX_PROCESSOR_NAME</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="n">iam</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">np</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nf">MPI_Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">argv</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nf">MPI_Comm_size</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">numprocs</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nf">MPI_Comm_rank</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">rank</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nf">MPI_Get_processor_name</span><span class="p">(</span><span class="n">processor_name</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">namelen</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">//omp_set_num_threads(4);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#pragma omp parallel default(shared) private(iam, np)
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">np</span> <span class="o">=</span> <span class="nf">omp_get_num_threads</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">iam</span> <span class="o">=</span> <span class="nf">omp_get_thread_num</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="nf">printf</span><span class="p">(</span><span class="s">"Hello from thread %d out of %d from process %d out of %d on %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">           <span class="n">iam</span><span class="p">,</span> <span class="n">np</span><span class="p">,</span> <span class="n">rank</span><span class="p">,</span> <span class="n">numprocs</span><span class="p">,</span> <span class="n">processor_name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nf">MPI_Finalize</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<p>Contrast it with the equivalent Chapel program:</p>
<div class="file" data-code-path="code/hello.chpl" data-code-type="main" data-start-line="1">
<div class="file-header">
<a download="hello.chpl" href="code/hello.chpl">hello.chpl</a>
</div>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma" tabindex="0"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma" tabindex="0"><code class="language-chapel" data-lang="chapel"><span class="line"><span class="cl"><span class="k">use</span><span class="w"> </span><span class="nx">IO</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">config</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">numTasks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">here</span><span class="p">.</span><span class="nx">maxTaskPar</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">coforall</span><span class="w"> </span><span class="nx">loc</span><span class="w"> </span><span class="kd">in</span><span class="w"> </span><span class="nx">Locales</span><span class="w"> </span><span class="k">do</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">on</span><span class="w"> </span><span class="nx">loc</span><span class="w"> </span><span class="k">do</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">coforall</span><span class="w"> </span><span class="nx">tid</span><span class="w"> </span><span class="kd">in</span><span class="w"> </span><span class="mi">0</span><span class="o">..&lt;</span><span class="nx">numTasks</span><span class="w"> </span><span class="k">do</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nx">writef</span><span class="p">(</span><span class="s">"Hello from task %i out of %i from locale %i out of %i on %s\n"</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">             </span><span class="nx">tid</span><span class="p">,</span><span class="w"> </span><span class="nx">numTasks</span><span class="p">,</span><span class="w"> </span><span class="nx">here</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span><span class="w"> </span><span class="nx">Locales</span><span class="p">.</span><span class="nx">size</span><span class="p">,</span><span class="w"> </span><span class="nx">here</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<p>The Chapel program is notably shorter and arguably easier to read by
virtue of it being a more modern language that was designed for
parallel computing and scalability.  Specifically, the use of
syntactic elements like:</p>
<ul>
<li><code>here</code> to refer to the <em>locale</em> (system resources) on which we’re
currently running,</li>
<li><code>coforall</code> loops to create parallel tasks, and</li>
<li><code>on</code> clauses to specify where tasks should execute</li>
</ul>
<p>result in a much more succinct expression of the computation.</p>
<p>In addition, the Chapel program’s syntax is subtly benefiting from
its post-SPMD programming model by having the program start as a
single task running on locale 0 rather than requiring the programmer
to write a <code>main()</code> procedure that is intended to be run once per
compute node, socket, or processor core.  It’s also benefiting from
Chapel’s support of a global address space, by having arbitrary
locales write to a single console output stream associated with locale
0.  Such benefits would become even more dramatic for a more complex
program that did any kind of data transfer between the distinct
processes executing the MPI or Chapel programs.</p>
<p>Similar comparisons could be made between Chapel and other HPC
programming notations like CUDA, HIP, SYCL, Kokkos, etc., but that
would warrant an entire article of its own.  Suffice it to say that I
believe that when a language contains features and syntax in support
of specifying parallelism and locality, it will benefit programmers
who are trying to express parallel computations at scale, whether
simple or complex.</p>
<h4 id="skyline-array-examples">
<a href="#skyline-array-examples">Skyline Array Examples</a>
</h4>
<p>As mentioned in the sidebar above, this article’s examples
illustrating how Chapel’s left-to-right declaration syntax supports
intuitive skyline arrays rely on a Chapel feature that has not yet
been implemented due to competing priorities.  Chapel <em>does</em> support
arrays of arrays, like:</p>
<div class="highlight"><pre class="chroma" tabindex="0"><code class="language-chapel" data-lang="chapel"><span class="line"><span class="cl"><span class="kd">var</span><span class="w"> </span><span class="nx">A</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="nx">n</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="nx">n</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="nx">k</span><span class="p">]</span><span class="w"> </span><span class="kt">real</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>However, currently the inner arrays of such nestings must share the
same index set.  Thus, it is not yet possible to declare an
array-of-arrays in which an inner array’s index set is parameterized
by the indices of an outer array, as in the triangular array
declaration above.  However, workarounds exist.</p>
<p>In practice, when users need this ability in Chapel as it stands
today, they often wrap the inner arrays in a record which acts
array-like.  Here’s a very simple example of how this can be done to
create the triangular array from the original article:</p>
<div class="file" data-code-path="code/skyline-record.chpl" data-code-type="main" data-start-line="1">
<div class="file-header">
<a download="skyline-record.chpl" href="code/skyline-record.chpl">skyline-record.chpl</a>
</div>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma" tabindex="0"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma" tabindex="0"><code class="language-chapel" data-lang="chapel"><span class="line"><span class="cl"><span class="c1">// the problem size, overridable by running the executable with `--n=...`
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">config</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// a record that wraps a 1D dense array
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">record</span><span class="w"> </span><span class="nc">array</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">var</span><span class="w"> </span><span class="nx">inds</span><span class="p">:</span><span class="w"> </span><span class="kt">range</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">type</span><span class="w"> </span><span class="nx">eltType</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">forwarding</span><span class="w"> </span><span class="kd">var</span><span class="w"> </span><span class="nx">B</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="nx">inds</span><span class="p">]</span><span class="w"> </span><span class="nx">eltType</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// a triangular array declaration
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nx">i</span><span class="w"> </span><span class="kd">in</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="nx">n</span><span class="p">]</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nx">array</span><span class="p">(</span><span class="mi">1</span><span class="o">..</span><span class="nx">i</span><span class="p">,</span><span class="w"> </span><span class="kt">real</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1">// alternatively, this could have been declared using an explicit type as:
</span></span></span><span class="line"><span class="cl"><span class="c1">//   var A: [1..n] array(real) = [i in 1..n] new array(1..i, real);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// initialize the triangular array
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">forall</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="kd">in</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="nx">n</span><span class="w"> </span><span class="k">do</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">forall</span><span class="w"> </span><span class="nx">j</span><span class="w"> </span><span class="kd">in</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="nx">i</span><span class="w"> </span><span class="k">do</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">A</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="nx">j</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mf">10.0</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// print it out
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="kd">in</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="nx">n</span><span class="w"> </span><span class="k">do</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nx">writeln</span><span class="p">(</span><span class="nx">A</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<p>In addition, by leaning on Chapel’s type inference, it’s possible to
create a triangular array of arrays by skipping the type declaration
altogether:</p>
<div class="file" data-code-path="code/skyline-value.chpl" data-code-type="main" data-start-line="1">
<div class="file-header">
<a download="skyline-value.chpl" href="code/skyline-value.chpl">skyline-value.chpl</a>
</div>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma" tabindex="0"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma" tabindex="0"><code class="language-chapel" data-lang="chapel"><span class="line"><span class="cl"><span class="c1">// the problem size, overridable by running the executable with `--n=...`
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">config</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// a pattern for creating a triangular array value that works today
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span><span class="w"> </span><span class="nx">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="kd">in</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="nx">n</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="nx">i</span><span class="p">]</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// initialize the triangular array
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">forall</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="kd">in</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="nx">n</span><span class="w"> </span><span class="k">do</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">forall</span><span class="w"> </span><span class="nx">j</span><span class="w"> </span><span class="kd">in</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="nx">i</span><span class="w"> </span><span class="k">do</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nx">A</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="nx">j</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mf">10.0</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// print it out
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="kd">in</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="nx">n</span><span class="w"> </span><span class="k">do</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nx">writeln</span><span class="p">(</span><span class="nx">A</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>
<p>Though such workarounds exist, it’s still regrettable to me that we
haven’t yet implemented the ability to declare such arrays directly as
<code>var A: [i in 1..n] [1..i] real;</code>, obviating the need for such helper
records or inferred types.</p>
<blockquote class="pull-quote">
<div class="quote-wrapper">
<div class="quote-container"><span class="open-quote">“</span></div>
<div class="quote-content">
<p>
These workarounds also emphasize the article’s point—that better
syntax can support patterns more directly and attractively.
</p>
</div>
<div class="quote-container"><span class="close-quote">”</span></div>
</div>
</blockquote>
<p>While the lack of such declarations means that the skyline array
examples in the original article won’t compile today, these
workarounds also emphasize the article’s point—that better syntax can
support the patterns more directly and attractively.  Specifically, I
would say that the workarounds above are not as attractive as the
original syntax; and they become even less manageable in the face of
the complex array declaration from the FMM computation.</p>
<p>Speaking of that data structure, here are the supporting declarations
for the <code>OSgFn</code> variable that I omitted from the original article due
to space constraints:</p>
<div class="highlight"><pre class="chroma" tabindex="0"><code class="language-chapel" data-lang="chapel"><span class="line"><span class="cl"><span class="c1">// the number of levels in the FMM hierarchy and the size of the finest level
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">config</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">nLvls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">             </span><span class="nx">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="o">**</span><span class="nx">nLvls</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// arrays of domains representing the dense problem space at each level of the
</span></span></span><span class="line"><span class="cl"><span class="c1">// hierarchy and the sparse subset of elements from that level that we'll compute
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">const</span><span class="w"> </span><span class="nx">DnsCubes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nx">lvl</span><span class="w"> </span><span class="kd">in</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="nx">nLvls</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="o">..</span><span class="nx">n</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="nx">n</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="nx">n</span><span class="p">}</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="mi">2</span><span class="o">**</span><span class="nx">lvl</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nx">SpsCubes</span><span class="p">:</span><span class="w">  </span><span class="p">[</span><span class="nx">lvl</span><span class="w"> </span><span class="kd">in</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="nx">nLvls</span><span class="p">]</span><span class="w"> </span><span class="k">sparse</span><span class="w"> </span><span class="k">subdomain</span><span class="p">(</span><span class="nx">DnsCubes</span><span class="p">[</span><span class="nx">lvl</span><span class="p">])</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="nx">computeSpsElts</span><span class="p">(</span><span class="nx">lvl</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// an array of domains representing the discretization of the signature function
</span></span></span><span class="line"><span class="cl"><span class="c1">// at each level of the hierarchy
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">const</span><span class="w"> </span><span class="nx">SgFns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nx">lvl</span><span class="w"> </span><span class="kd">in</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="nx">nLvls</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="o">..</span><span class="nx">sgFnSize</span><span class="p">(</span><span class="nx">lvl</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="mi">2</span><span class="o">*</span><span class="nx">sgFnSize</span><span class="p">(</span><span class="nx">lvl</span><span class="p">)};</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// the array representing the complete set of outer signature functions, made up of:
</span></span></span><span class="line"><span class="cl"><span class="c1">//   * a 1D array over the levels of the hierarchy
</span></span></span><span class="line"><span class="cl"><span class="c1">//   * of sparse 3D arrays representing the elements at that level
</span></span></span><span class="line"><span class="cl"><span class="c1">//   * of dense 2D arrays representing an element's discretized signature function
</span></span></span><span class="line"><span class="cl"><span class="c1">//   * of 3-element vectors
</span></span></span><span class="line"><span class="cl"><span class="c1">//   * of complex values
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span><span class="w"> </span><span class="nx">OSgFn</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="nx">lvl</span><span class="w"> </span><span class="kd">in</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="nx">nLvls</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="nx">SpsCubes</span><span class="p">[</span><span class="nx">lvl</span><span class="p">]]</span><span class="w"> </span><span class="p">[</span><span class="nx">SgFns</span><span class="p">[</span><span class="nx">lvl</span><span class="p">]]</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="kt">complex</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>Note that in this code, only the declarations of <code>SpsCubes</code> and
<code>OSgFn</code> are unsupported in Chapel today since they are the two cases
that rely on using an outer array’s indices to parameterize an inner
array’s domain.  The other declarations would work fine.</p>
<h4 id="wrapping-up">
<a href="#wrapping-up">Wrapping Up</a>
</h4>
<p>That concludes this month’s myth about whether syntax matters when
designing scalable parallel programming languages.  I definitely
believe that syntax does matter, and that it can significantly improve
how clearly a program is expressed and how programmers think about
their code.</p>
<p>Next month, we’ll revisit the fifth article in this series, which
addresses the myth that productive languages require a magic compiler.
See you then!</p>
</div>
</main>
<div class="container">
<div class="share-view">
<h3>Share this article:</h3>
<div class="share-buttons">
<a class="button share-button" href="https://bsky.app/intent/compose?text=Check+out+this+post+entitled+%2210+Myths+About+Scalable+Parallel+Programming+Languages+%28Redux%29%2C++Part+4%3A+Syntax+Matters%22+on+the+Chapel+Programming+Language+blog%3A+https%3A%2F%2Fchapel-lang.org%2Fblog%2Fposts%2F10myths-part4%2F" rel="noopener noreferrer" style="--button-color: #6cb0f9; --button-color-light: white;" target="_blank">
<img alt="Share on BlueSky" height="30" src="../../img/bluesky-logo.jpg" width="30"/>
</a>
<a class="button share-button" href="https://www.facebook.com/sharer/sharer.php?description=Check+out+this+post+entitled+%2210+Myths+About+Scalable+Parallel+Programming+Languages+%28Redux%29%2C++Part+4%3A+Syntax+Matters%22+on+the+Chapel+Programming+Language+blog%3A&amp;u=https%3A%2F%2Fchapel-lang.org%2Fblog%2Fposts%2F10myths-part4%2F" rel="noopener noreferrer" style="--button-color: #3a559f; --button-color-light: white;" target="_blank">
<img alt="Share on Facebook" height="30" src="../../img/facebook-logo.png" width="30"/>
</a>
<a class="button share-button" href="https://linkedin.com/share?text=Check+out+this+post+entitled+%2210+Myths+About+Scalable+Parallel+Programming+Languages+%28Redux%29%2C++Part+4%3A+Syntax+Matters%22+on+the+Chapel+Programming+Language+blog%3A&amp;url=https%3A%2F%2Fchapel-lang.org%2Fblog%2Fposts%2F10myths-part4%2F" rel="noopener noreferrer" style="--button-color: #2867b2; --button-color-light: white;" target="_blank">
<img alt="Share on LinkedIn" height="30" src="../../img/linkedin-logo.png" width="30"/>
</a>
<a class="button share-button" href="https://new.reddit.com/submit?title=10+Myths+About+Scalable+Parallel+Programming+Languages+%28Redux%29%2C++Part+4%3A+Syntax+Matters&amp;url=https%3A%2F%2Fchapel-lang.org%2Fblog%2Fposts%2F10myths-part4%2F" rel="noopener noreferrer" style="--button-color: #ff4500; --button-color-light: white;" target="_blank">
<img alt="Share on Reddit" height="30" src="../../img/reddit-logo.svg" width="30"/>
</a>
<a class="button share-button" href="http://x.com/share?text=Check+out+this+post+entitled+%2210+Myths+About+Scalable+Parallel+Programming+Languages+%28Redux%29%2C++Part+4%3A+Syntax+Matters%22+on+the+Chapel+Programming+Language+blog%3A&amp;url=https%3A%2F%2Fchapel-lang.org%2Fblog%2Fposts%2F10myths-part4%2F" rel="noopener noreferrer" style="--button-color: #000000; --button-color-light: #7a7a7a;" target="_blank">
<img alt="Share on X" height="30" src="../../img/x-logo.svg" width="30"/>
</a>
</div>
</div>
</div>
<nav class="container series-navigation">
<div class="series-button-wrapper prev">
<a class="button" href="../../posts/10myths-part3/">
<svg class="feather">
<use xlink:href="../../feather-sprite.svg#chevrons-left"></use>
</svg>
<span>
                    Previous in series
                    <span class="series-button-name">
                        
10 Myths About Scalable Parallel Programming Languages (Redux),  Part 3: New Languages vs. Language Extensions


                    </span>
</span>
</a>
</div>
<div class="series-button-wrapper next">
<a class="button" href="../../posts/10myths-part5/">
<span>
                    Next in series
                    <span class="series-button-name">
                        
10 Myths About Scalable Parallel Programming Languages (Redux),  Part 5: Productivity and Magic Compilers


                    </span>
</span>
<svg class="feather">
<use xlink:href="../../feather-sprite.svg#chevrons-right"></use>
</svg>
</a>
</div>
</nav>
</body>
</html>
